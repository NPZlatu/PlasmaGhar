{"version":3,"sources":["../../es6/home.js"],"names":["Home","clicked","model","selector","rules","required","value","error","regex","filters","blood_group","state","district","checkValidation","bind","onFeedBackSubmit","requestDistricts","resetFilters","onSearchClick","setUpListeners","setUpOnBlurListeners","setUpSearchFieldsListeners","setModalListeners","$","on","onIWillHelpClick","location","reload","self","code","attr","show","text","bloodGroup","donorId","axios","get","then","user","data","console","log","id","role","toaster","settings","timeout","priority","title","message","alert","modal","stateCode","districts","length","populateDistricts","html","unbind","post","donors","trElement","forEach","donor","index","push","append","join","onRequestClick","elements","name","map","v","blur","showError","element","val","errorElement","next","valid","conditions","cond","RegExp","test","match","matchSelectorVal","hide","retrunVal","i","window","href","requestSearchLists","event","preventDefault","sendFeedback","email","response","success","resetForm","document","ready"],"mappings":"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","sourcesContent":["class Home {\r\n  constructor() {\r\n    this.clicked = false;\r\n    this.model = [\r\n      {\r\n        selector: \"fb-firstName\",\r\n        rules: {\r\n          required: {\r\n            value: true,\r\n            error: \"First name is required.\",\r\n          },\r\n        },\r\n        value: \"\",\r\n      },\r\n      {\r\n        selector: \"fb-lastName\",\r\n        rules: {\r\n          required: {\r\n            value: true,\r\n            error: \"Last name is required.\",\r\n          },\r\n        },\r\n        value: \"\",\r\n      },\r\n      {\r\n        selector: \"fb-email\",\r\n        rules: {\r\n          regex: {\r\n            value: /^(([^<>()\\[\\]\\\\.,;:\\s@\"]+(\\.[^<>()\\[\\]\\\\.,;:\\s@\"]+)*)|(\".+\"))@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,}))$/,\r\n            error: \"Please enter a valid email address\",\r\n          },\r\n        },\r\n        value: \"\",\r\n      },\r\n      {\r\n        selector: \"fb-msg\",\r\n        rules: {\r\n          required: {\r\n            value: true,\r\n            error: \"Message is required.\",\r\n          },\r\n        },\r\n        value: \"Message is required\",\r\n      },\r\n    ];\r\n\r\n    this.filters = {\r\n      blood_group: \"\",\r\n      state: \"\",\r\n      district: \"\",\r\n    };\r\n\r\n    this.checkValidation = this.checkValidation.bind(this);\r\n    this.onFeedBackSubmit = this.onFeedBackSubmit.bind(this);\r\n    this.requestDistricts = this.requestDistricts.bind(this);\r\n    this.resetFilters = this.resetFilters.bind(this);\r\n    this.onSearchClick = this.onSearchClick.bind(this);\r\n    this.setUpListeners();\r\n  }\r\n\r\n  setUpListeners() {\r\n    this.setUpOnBlurListeners();\r\n    this.setUpSearchFieldsListeners();\r\n    this.setModalListeners();\r\n    $(\".btn-help\").on(\"click\", this.onIWillHelpClick);\r\n    $(\".feedback-send\").on(\"click\", this.onFeedBackSubmit);\r\n    $(\".search-btn\").on(\"click\", this.onSearchClick);\r\n  }\r\n\r\n  setModalListeners() {\r\n    $(\"#searchModal\").on(\"hidden.bs.modal\", () => {\r\n      location.reload(true);\r\n    });\r\n  }\r\n\r\n  setUpSearchFieldsListeners() {\r\n    const self = this;\r\n    $(\".state-dropdown a\").on(\"click\", function () {\r\n      const code = $(this).attr(\"data-code\");\r\n      const state = $(this).attr(\"data-name\");\r\n      self.filters.state = state;\r\n      $(\".filter-div\").show();\r\n      $(\".filter-state\").show();\r\n      $(\".select-state\").text(state);\r\n      self.requestDistricts(code);\r\n    });\r\n\r\n    $(\".bg-dropdown a\").on(\"click\", function () {\r\n      const bloodGroup = $(this).text();\r\n      $(\".filter-div\").show();\r\n      $(\".filter-bg\").show();\r\n      $(\".select-bg\").text(bloodGroup);\r\n      self.filters.blood_group = bloodGroup;\r\n    });\r\n\r\n    $(\".clear-filter\").on(\"click\", this.resetFilters);\r\n  }\r\n\r\n  onRequestClick(donorId) {\r\n    axios.get(`/user/who-am-i`).then(({ data: user }) => {\r\n      console.log(user);\r\n      if (user.id) {\r\n        if (user.role === \"donor\") {\r\n          $.toaster({ settings: { timeout: 10000 } });\r\n          $.toaster({\r\n            priority: \"danger\",\r\n            title: \"Error\",\r\n            message: `You are logged in as a donar. You need to be a receiver to be able to request plasma!`,\r\n          });\r\n        } else {\r\n          alert(\"we need to do things\");\r\n        }\r\n      } else {\r\n        $(\"#signinModal\").modal(\"show\");\r\n      }\r\n    });\r\n  }\r\n\r\n  requestDistricts(stateCode) {\r\n    axios\r\n      .get(`/address/get-districts?code=${stateCode}`)\r\n      .then(({ data: districts }) => {\r\n        if (districts && districts.length > 0) {\r\n          this.populateDistricts(districts);\r\n        }\r\n      })\r\n      .catch(function (error) {});\r\n  }\r\n\r\n  requestSearchLists() {\r\n    $(\".table-searchlist tbody\").html(\"\");\r\n    $(\".table-searchlist tbody td button\").unbind(\"click\");\r\n\r\n    axios\r\n      .post(\"/user/search\", this.filters)\r\n      .then(({ data: donors }) => {\r\n        if (donors.length > 0) {\r\n          const self = this;\r\n          const trElement = [];\r\n          donors.forEach((donor, index) => {\r\n            trElement.push(`\r\n            <tr>\r\n            <td> ${index + 1} </td>\r\n            <td>Anonymous-${donor.id}</td>\r\n            <td> ${donor.blood_group}</td>\r\n            <td> ${donor.district}</td>\r\n            <td><button type=\"button\"\r\n            data-id=\"${donor.id}\"\r\n            class=\"btn btn-sm btn-outline-success\">Request</button>\r\n            </td>\r\n            </tr>\r\n            `);\r\n          });\r\n\r\n          $(\".table-searchlist tbody\").append(trElement.join(\"\"));\r\n          $(\".table-searchlist tbody td button\").on(\"click\", function () {\r\n            const donorId = $(this).attr(\"data-id\");\r\n            self.onRequestClick(donorId);\r\n          });\r\n        }\r\n      })\r\n      .catch(function (error) {\r\n        console.log(error);\r\n      });\r\n    $(\"#searchModal\").modal(\"show\");\r\n  }\r\n\r\n  populateDistricts(districts) {\r\n    const elements = [];\r\n    $(\".district-dropdown\").html(\"\");\r\n    districts.forEach((district) => {\r\n      elements.push(\r\n        `<a class=\"dropdown-item\" href=\"javascript:void(0)\">${district.name}</a>`\r\n      );\r\n    });\r\n    $(\".district-dropdown\").append(elements.join(\"\"));\r\n    $(\".district-dropdown a\").unbind(\"click\");\r\n    const self = this;\r\n\r\n    $(\".district-dropdown a\").on(\"click\", function () {\r\n      const district = $(this).text();\r\n      $(\".filter-div\").show();\r\n      $(\".filter-district\").show();\r\n      $(\".select-district\").text(district);\r\n      self.filters.district = district;\r\n    });\r\n  }\r\n\r\n  setUpOnBlurListeners() {\r\n    this.model.map((v, index) => {\r\n      const { selector, rules } = v;\r\n      const self = this;\r\n      $(`#${selector}`).blur(function () {\r\n        if (self.clicked) self.showError(selector, rules, index);\r\n      });\r\n    });\r\n  }\r\n\r\n  showError(selector, rules, index) {\r\n    const element = $(`#${selector}`);\r\n    const value = element.val();\r\n    const errorElement = element.next();\r\n    let message = \"\";\r\n    let valid = true;\r\n\r\n    if (!value && rules.required && rules.required.value) {\r\n      if (!rules.required.conditions) {\r\n        valid = false;\r\n        message = rules.required.error;\r\n      } else {\r\n        rules.required.conditions.forEach((cond) => {\r\n          const selector = cond.selector;\r\n          if (!$(selector).val()) {\r\n            valid = false;\r\n            message = rules.required.error;\r\n          }\r\n        });\r\n      }\r\n    } else if (rules.regex) {\r\n      valid = new RegExp(rules.regex.value).test(value);\r\n      if (rules.required && rules.required.value === false) {\r\n        valid = !value || valid;\r\n      }\r\n      if (!valid) message = rules.regex.error;\r\n    } else if (rules.match) {\r\n      const matchSelectorVal = $(`#${rules.match.value}`).val();\r\n      if (value !== matchSelectorVal) {\r\n        valid = false;\r\n        message = rules.match.error;\r\n      }\r\n    }\r\n    if (!valid && message) {\r\n      errorElement.text(message);\r\n      errorElement.show();\r\n    } else {\r\n      errorElement.text(\"\");\r\n      errorElement.hide();\r\n    }\r\n    this.model[index].value = value;\r\n    return valid;\r\n  }\r\n\r\n  checkValidation() {\r\n    let valid = true;\r\n    let retrunVal = true;\r\n    for (let i = 0; i < this.model.length; i++) {\r\n      const { selector, rules } = this.model[i];\r\n      valid = this.showError(selector, rules, i);\r\n      if (!valid) retrunVal = false;\r\n    }\r\n    return retrunVal;\r\n  }\r\n\r\n  onIWillHelpClick() {\r\n    axios\r\n      .get(`/user/who-am-i`)\r\n      .then(({ data: user }) => {\r\n        if (user.id) {\r\n          window.location.href = \"/dashboard\";\r\n        } else {\r\n          $(\"#signinModal\").modal(\"show\");\r\n        }\r\n      })\r\n      .catch(function (error) {\r\n        console.log(error);\r\n      });\r\n  }\r\n\r\n  onSearchClick() {\r\n    const { blood_group: bloodGroup, state, district } = this.filters;\r\n    let valid = true;\r\n    if (!bloodGroup) {\r\n      $.toaster({ settings: { timeout: 4000 } });\r\n      $.toaster({\r\n        priority: \"danger\",\r\n        title: \"Error\",\r\n        message: `Please choose the blood group!`,\r\n      });\r\n      valid = false;\r\n    }\r\n\r\n    if (!state) {\r\n      $.toaster({ settings: { timeout: 4000 } });\r\n      $.toaster({\r\n        priority: \"danger\",\r\n        title: \"Error\",\r\n        message: `Please choose the state!`,\r\n      });\r\n      valid = false;\r\n    }\r\n\r\n    if (!district) {\r\n      $.toaster({ settings: { timeout: 4000 } });\r\n      $.toaster({\r\n        priority: \"danger\",\r\n        title: \"Error\",\r\n        message: `Please choose the district!`,\r\n      });\r\n      valid = false;\r\n    }\r\n\r\n    if (valid) this.requestSearchLists();\r\n  }\r\n\r\n  onFeedBackSubmit(event) {\r\n    event.preventDefault();\r\n    this.clicked = true;\r\n    const valid = this.checkValidation();\r\n    if (valid) {\r\n      this.sendFeedback();\r\n    }\r\n  }\r\n\r\n  resetForm() {\r\n    this.model.forEach((v) => {\r\n      const { selector } = v;\r\n      $(`#${selector}`).val(\"\");\r\n      v.value = \"\";\r\n    });\r\n    $(\".invalid-feedback\").hide();\r\n  }\r\n\r\n  resetFilters() {\r\n    this.filters = {\r\n      blood_group: \"\",\r\n      state: \"\",\r\n      district: \"\",\r\n    };\r\n    $(\".filter-div\").hide();\r\n    $(\".filter-state\").hide();\r\n    $(\".filter-bg\").hide();\r\n    $(\".select-state\").html(\"\");\r\n    $(\".select-bg\").html(\"\");\r\n    $(\".filter-district\").hide();\r\n    $(\".select-district\").html(\"\");\r\n    $(\".district-dropdown\").html(\"\");\r\n  }\r\n\r\n  sendFeedback() {\r\n    const { model } = this;\r\n    const data = {\r\n      name: model[0].value + \" \" + model[1].value,\r\n      email: model[2].value,\r\n      message: model[3].value,\r\n    };\r\n\r\n    axios\r\n      .post(\"/site/feedback\", data)\r\n      .then(({ data: response }) => {\r\n        $.toaster({ settings: { timeout: 3000 } });\r\n        if (response && response.success) {\r\n          this.resetForm();\r\n          $.toaster({\r\n            priority: \"success\",\r\n            title: \"Success\",\r\n            message: `Your feedback has been submitted successfully.`,\r\n          });\r\n        } else {\r\n          $.toaster({\r\n            priority: \"danger\",\r\n            title: \"Error\",\r\n            message: `Something is wrong. Please try later`,\r\n          });\r\n        }\r\n      })\r\n      .catch(function (error) {\r\n        $.toaster({\r\n          priority: \"danger\",\r\n          title: \"Error\",\r\n          message: `Something is wrong. Please try later`,\r\n        });\r\n      });\r\n  }\r\n}\r\n\r\n$(document).ready(function () {\r\n  new Home();\r\n});\r\n"],"file":"home.js"}