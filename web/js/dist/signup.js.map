{"version":3,"sources":["../../es6/signup.js"],"names":["SignUp","selector","rules","regex","value","error","required","conditions","match","clicked","states","model","getModel","onSignUpConfirmClick","bind","checkValidation","setModalListeners","setUpListeners","$","click","modal","window","location","href","includes","setUpOnBlurListeners","setUpOnChangeListeners","on","length","requestStates","addClass","resetForm","map","v","index","self","blur","showError","code","data","console","log","requestDistricts","hide","prop","errorElement","next","text","show","element","val","message","valid","forEach","cond","RegExp","test","matchSelectorVal","retrunVal","i","healthFine","userRole","toaster","settings","timeout","priority","title","agree","checkIfHealthConditionsFine","checkIfTermsAndConditionsAgreed","registerUser","axios","get","then","populateStates","stateCode","districts","populateDistricts","html","options","name","append","phone_number","blood_group","state","district","password","user_role","post","response","success","link","document","ready","defaults","headers","attr","common"],"mappings":"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","sourcesContent":["/**\n * Class to handle signup actions\n */\nclass SignUp {\n  getModel() {\n    return [\n      {\n        selector: \"phoneNumber\",\n        rules: {\n          regex: {\n            value: /^[0-9]{10}$/,\n            error: \"Phone Number must have 10 digits.\",\n          },\n        },\n        value: \"\",\n      },\n      {\n        selector: \"bloodGroup\",\n        rules: {\n          required: {\n            value: true,\n            conditions: [\n              {\n                selector: \"input#gridRadios2:checked\",\n                value: true,\n              },\n            ],\n            error: \"Blood Group is required.\",\n          },\n        },\n        value: \"\",\n      },\n\n      {\n        selector: \"state\",\n        rules: {\n          required: {\n            value: true,\n            error: \"State is required.\",\n          },\n        },\n        value: \"\",\n      },\n      {\n        selector: \"district\",\n        rules: {\n          required: {\n            value: true,\n            error: \"District is required.\",\n          },\n        },\n        value: \"\",\n      },\n      {\n        selector: \"password\",\n        rules: {\n          regex: {\n            value: /^(?=.*[A-Za-z])(?=.*\\d)[A-Za-z\\d]{8,}$/,\n            error:\n              \"Password must be minimum eight characters, at least one letter and one number\",\n          },\n        },\n        value: \"\",\n      },\n      {\n        selector: \"confirm-password\",\n        rules: {\n          match: {\n            value: \"password\",\n            error: \"Confirm Password does not match.\",\n          },\n        },\n        value: \"\",\n      },\n    ];\n  }\n\n  constructor() {\n    this.clicked = false;\n    this.states = [];\n    this.model = this.getModel();\n    this.onSignUpConfirmClick = this.onSignUpConfirmClick.bind(this);\n    this.checkValidation = this.checkValidation.bind(this);\n    this.setModalListeners = this.setModalListeners.bind(this);\n    this.setUpListeners();\n  }\n\n  setUpListeners() {\n    $(\".confirm-signup\").click(this.onSignUpConfirmClick);\n    $(\".signin-register\").click(function () {\n      $(\"#signupModal\").modal(\"hide\");\n      if (!window.location.href.includes(\"/user/register\")) {\n        $(\"#signinModal\").modal(\"show\");\n      } else {\n        window.location.href = \"/user/login\";\n      }\n    });\n    this.setUpOnBlurListeners();\n    this.setUpOnChangeListeners();\n    this.setModalListeners();\n  }\n\n  setModalListeners() {\n    $(\"#signupModal\").on(\"shown.bs.modal\", () => {\n      if (this.states.length === 0) this.requestStates();\n      $(\"body\").addClass(\"modal-open\");\n    });\n\n    $(\"#signupModal\").on(\"hidden.bs.modal\", () => {\n      if (window.location.href.includes(\"/user/register\")) {\n        window.location.href = \"/\";\n      } else this.resetForm();\n    });\n  }\n\n  setUpOnBlurListeners() {\n    this.model.map((v, index) => {\n      const { selector, rules } = v;\n      const self = this;\n      $(`#${selector}`).blur(function () {\n        if (self.clicked) self.showError(selector, rules, index);\n      });\n    });\n  }\n\n  setUpOnChangeListeners() {\n    const self = this;\n\n    $(\"#state\").on(\"change\", function () {\n      if (this.value) {\n        const code = $(\"option:selected\", this).data(\"code\");\n        console.log(code);\n        self.requestDistricts(code);\n      } else {\n        $(\".district-wrapper\").hide();\n      }\n    });\n\n    $(\"input#gridRadios2\").on(\"click\", function () {\n      $(\"input#gridRadios1\").prop(\"checked\", false);\n      $(\".plasma-warning\").hide();\n      $(\".confirm-health\").hide();\n      const errorElement = $(\"#bloodGroup\").next();\n      errorElement.text(\"\");\n      errorElement.hide();\n    });\n\n    $(\"input#gridRadios1\").on(\"click\", function () {\n      $(\"input#gridRadios2\").prop(\"checked\", false);\n      $(\".plasma-warning\").show();\n      $(\".confirm-health\").show();\n    });\n  }\n\n  showError(selector, rules, index) {\n    const element = $(`#${selector}`);\n    const value = element.val();\n    const errorElement = element.next();\n    let message = \"\";\n    let valid = true;\n\n    if (!value && rules.required && rules.required.value) {\n      if (!rules.required.conditions) {\n        valid = false;\n        message = rules.required.error;\n      } else {\n        rules.required.conditions.forEach((cond) => {\n          const selector = cond.selector;\n          if (!$(selector).val()) {\n            valid = false;\n            message = rules.required.error;\n          }\n        });\n      }\n    } else if (rules.regex) {\n      valid = new RegExp(rules.regex.value).test(value);\n      if (rules.required && rules.required.value === false) {\n        valid = !value || valid;\n      }\n      if (!valid) message = rules.regex.error;\n    } else if (rules.match) {\n      const matchSelectorVal = $(`#${rules.match.value}`).val();\n      if (value !== matchSelectorVal) {\n        valid = false;\n        message = rules.match.error;\n      }\n    }\n    if (!valid && message) {\n      errorElement.text(message);\n      errorElement.show();\n    } else {\n      errorElement.text(\"\");\n      errorElement.hide();\n    }\n    this.model[index].value = value;\n    return valid;\n  }\n\n  checkValidation() {\n    let valid = true;\n    let retrunVal = true;\n    for (let i = 0; i < this.model.length; i++) {\n      const { selector, rules } = this.model[i];\n      valid = this.showError(selector, rules, i);\n      if (!valid) retrunVal = false;\n    }\n    return retrunVal;\n  }\n\n  resetForm() {\n    this.model.forEach((v) => {\n      const { selector } = v;\n      $(`#${selector}`).val(\"\");\n      v.value = \"\";\n    });\n    $(\".invalid-feedback\").hide();\n  }\n\n  checkIfHealthConditionsFine() {\n    let healthFine = false;\n    const userRole = $(\"input#gridRadios1:checked\").val() ? 0 : 1;\n    if (userRole === 1) healthFine = true;\n    else {\n      if ($(\"#confirmHealth:checked\").val()) {\n        healthFine = true;\n      } else {\n        healthFine = false;\n        $.toaster({ settings: { timeout: 5000 } });\n        $.toaster({\n          priority: \"danger\",\n          title: \"Confirm Health\",\n          message: `You must confirm that you do not have listed health conditions before signup.`,\n        });\n      }\n    }\n    return healthFine;\n  }\n\n  checkIfTermsAndConditionsAgreed() {\n    let agree = true;\n    if (!$(\"#terms:checked\").val()) {\n      $.toaster({ settings: { timeout: 5000 } });\n      $.toaster({\n        priority: \"danger\",\n        title: \"Terms and Conditions\",\n        message: `You must agree to our terms and conditions to proceed further.`,\n      });\n      agree = false;\n    }\n    return agree;\n  }\n\n  onSignUpConfirmClick() {\n    this.clicked = true;\n    const valid = this.checkValidation();\n    if (valid) {\n      if (this.checkIfHealthConditionsFine()) {\n        if (this.checkIfTermsAndConditionsAgreed()) this.registerUser();\n      }\n    }\n  }\n\n  requestStates() {\n    axios\n      .get(\"/address/get-states\")\n      .then(({ data: states }) => {\n        if (states && states.length > 0) {\n          this.states = states;\n          this.populateStates();\n        }\n      })\n      .catch(function (error) {});\n  }\n\n  requestDistricts(stateCode) {\n    axios\n      .get(`/address/get-districts?code=${stateCode}`)\n      .then(({ data: districts }) => {\n        if (districts && districts.length > 0) {\n          this.populateDistricts(districts);\n        }\n      })\n      .catch(function (error) {});\n  }\n\n  populateStates() {\n    const { states } = this;\n    $(\"#state\").html(\"\");\n    let options = \"<option selected value>SELECT STATE</option>\";\n\n    for (let i = 0; i < states.length; i++) {\n      options += `<option data-code=${states[i].code} value=${states[i].name}>${states[i].name}</option>`;\n    }\n    $(\"#state\").append(options);\n  }\n\n  populateDistricts(districts) {\n    $(\"#district\").html(\"\");\n    let options = \"<option selected value>SELECT DISTRICT</option>\";\n    for (let i = 0; i < districts.length; i++) {\n      options += `<option data-code=${districts[i].code} value=${districts[i].name}>${districts[i].name}</option>`;\n    }\n    $(\".district-wrapper\").show();\n    $(\"#district\").append(options);\n  }\n\n  registerUser() {\n    const { model } = this;\n    const data = {\n      phone_number: model[0].value,\n      blood_group: model[1].value,\n      state: model[2].value,\n      district: model[3].value,\n      password: model[4].value,\n      user_role: $(\"input#gridRadios1:checked\").val() ? 0 : 1,\n    };\n\n    axios\n      .post(\"/user/save\", data)\n      .then(({ data: response }) => {\n        if (response && response.success) {\n          this.resetForm();\n          $(\"#signupModal\").modal(\"hide\");\n          $.toaster({ settings: { timeout: 15000 } });\n\n          $.toaster({\n            priority: \"success\",\n            title: \"Success\",\n            message: `You are successfully registered, we have sent a confirmation link on your phone. \n          Please click on that link to verify your phone.\n          <a href=\"${response.link}\"> CLICK THIS LINK </a>\n          `,\n          });\n        } else if (\n          response &&\n          response.error &&\n          response.error === \"exist already\"\n        ) {\n          const errorElement = $(\"#phoneNumber\").next();\n          errorElement.text(\"User already exists with this phone number\");\n          errorElement.show();\n        }\n      })\n      .catch(function (error) {\n        console.log(error);\n        $.toaster({ settings: { timeout: 5000 } });\n        $.toaster({\n          priority: \"danger\",\n          title: \"Error\",\n          message: `Something is wrong. Please try later`,\n        });\n      });\n  }\n}\n\n$(document).ready(function () {\n  axios.defaults.headers.post[\"X-CSRF-Token\"] = $(\n    'meta[name=\"csrf-token\"]'\n  ).attr(\"content\");\n  axios.defaults.headers.common[\"X-Requested-With\"] = \"XMLHttpRequest\";\n\n  new SignUp();\n});\n"],"file":"signup.js"}