{"version":3,"sources":["../../es6/signup.js"],"names":["SignUp","selector","rules","regex","value","error","required","conditions","match","clicked","states","model","getModel","onSignUpConfirmClick","bind","checkValidation","setModalListeners","setUpListeners","$","click","modal","setUpOnBlurListeners","setUpOnChangeListeners","on","length","requestStates","resetForm","map","v","index","self","blur","showError","code","data","console","log","requestDistricts","hide","prop","errorElement","next","text","element","val","message","valid","forEach","cond","RegExp","test","matchSelectorVal","show","retrunVal","i","agree","toaster","settings","timeout","priority","title","checkIfTermsAndConditionsAgreed","registerUser","axios","get","then","populateStates","stateCode","districts","populateDistricts","html","options","name","append","phone_number","blood_group","state","district","password","user_role","post","response","success","document","ready","defaults","headers","attr","common"],"mappings":"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","sourcesContent":["/**\n * Class to handle signup actions\n */\nclass SignUp {\n  getModel() {\n    return [\n      {\n        selector: \"phoneNumber\",\n        rules: {\n          regex: {\n            value: /^[0-9]{10}$/,\n            error: \"Phone Number must have 10 digits.\",\n          },\n        },\n        value: \"\",\n      },\n      {\n        selector: \"bloodGroup\",\n        rules: {\n          required: {\n            value: true,\n            conditions: [\n              {\n                selector: \"input#gridRadios2:checked\",\n                value: true,\n              },\n            ],\n            error: \"Blood Group is required.\",\n          },\n        },\n        value: \"\",\n      },\n\n      {\n        selector: \"state\",\n        rules: {\n          required: {\n            value: true,\n            error: \"State is required.\",\n          },\n        },\n        value: \"\",\n      },\n      {\n        selector: \"district\",\n        rules: {\n          required: {\n            value: true,\n            error: \"District is required.\",\n          },\n        },\n        value: \"\",\n      },\n      {\n        selector: \"password\",\n        rules: {\n          regex: {\n            value: /^(?=.*[A-Za-z])(?=.*\\d)[A-Za-z\\d]{8,}$/,\n            error:\n              \"Password must be minimum eight characters, at least one letter and one number\",\n          },\n        },\n        value: \"\",\n      },\n      {\n        selector: \"confirm-password\",\n        rules: {\n          match: {\n            value: \"password\",\n            error: \"Confirm Password does not match.\",\n          },\n        },\n        value: \"\",\n      },\n    ];\n  }\n\n  constructor() {\n    this.clicked = false;\n    this.states = [];\n    this.model = this.getModel();\n    this.onSignUpConfirmClick = this.onSignUpConfirmClick.bind(this);\n    this.checkValidation = this.checkValidation.bind(this);\n    this.setModalListeners = this.setModalListeners.bind(this);\n    this.setUpListeners();\n  }\n\n  setUpListeners() {\n    $(\".confirm-signup\").click(this.onSignUpConfirmClick);\n    $(\".signin-register\").click(function () {\n      $(\"#signupModal\").modal(\"hide\");\n      $(\"#signinModal\").modal(\"show\");\n    });\n    this.setUpOnBlurListeners();\n    this.setUpOnChangeListeners();\n    this.setModalListeners();\n  }\n\n  setModalListeners() {\n    $(\"#signupModal\").on(\"shown.bs.modal\", () => {\n      if (this.states.length === 0) this.requestStates();\n    });\n\n    $(\"#signupModal\").on(\"hidden.bs.modal\", () => {\n      this.resetForm();\n    });\n  }\n\n  setUpOnBlurListeners() {\n    this.model.map((v, index) => {\n      const { selector, rules } = v;\n      const self = this;\n      $(`#${selector}`).blur(function () {\n        if (self.clicked) self.showError(selector, rules, index);\n      });\n    });\n  }\n\n  setUpOnChangeListeners() {\n    const self = this;\n\n    $(\"#state\").on(\"change\", function () {\n      if (this.value) {\n        const code = $(\"option:selected\", this).data(\"code\");\n        console.log(code);\n        self.requestDistricts(code);\n      } else {\n        $(\".district-wrapper\").hide();\n      }\n    });\n\n    $(\"input#gridRadios2\").on(\"click\", function () {\n      $(\"input#gridRadios1\").prop(\"checked\", false);\n      const errorElement = $(\"#bloodGroup\").next();\n      errorElement.text(\"\");\n      errorElement.hide();\n    });\n  }\n\n  showError(selector, rules, index) {\n    const element = $(`#${selector}`);\n    const value = element.val();\n    const errorElement = element.next();\n    let message = \"\";\n    let valid = true;\n\n    if (!value && rules.required && rules.required.value) {\n      if (!rules.required.conditions) {\n        valid = false;\n        message = rules.required.error;\n      } else {\n        rules.required.conditions.forEach((cond) => {\n          const selector = cond.selector;\n          if (!$(selector).val()) {\n            valid = false;\n            message = rules.required.error;\n          }\n        });\n      }\n    } else if (rules.regex) {\n      valid = new RegExp(rules.regex.value).test(value);\n      if (rules.required && rules.required.value === false) {\n        valid = !value || valid;\n      }\n      if (!valid) message = rules.regex.error;\n    } else if (rules.match) {\n      const matchSelectorVal = $(`#${rules.match.value}`).val();\n      if (value !== matchSelectorVal) {\n        valid = false;\n        message = rules.match.error;\n      }\n    }\n    if (!valid && message) {\n      errorElement.text(message);\n      errorElement.show();\n    } else {\n      errorElement.text(\"\");\n      errorElement.hide();\n    }\n    this.model[index].value = value;\n    return valid;\n  }\n\n  checkValidation() {\n    let valid = true;\n    let retrunVal = true;\n    for (let i = 0; i < this.model.length; i++) {\n      const { selector, rules } = this.model[i];\n      valid = this.showError(selector, rules, i);\n      if (!valid) retrunVal = false;\n    }\n    return retrunVal;\n  }\n\n  resetForm() {\n    this.model.forEach((v) => {\n      const { selector } = v;\n      $(`#${selector}`).val(\"\");\n      v.value = \"\";\n    });\n    $(\".invalid-feedback\").hide();\n  }\n\n  checkIfTermsAndConditionsAgreed() {\n    let agree = true;\n    if (!$(\"#terms:checked\").val()) {\n      $.toaster({ settings: { timeout: 5000 } });\n      $.toaster({\n        priority: \"danger\",\n        title: \"Terms and Conditions\",\n        message: `You must agree to our terms and conditions to proceed further.`,\n      });\n      agree = false;\n    }\n    return agree;\n  }\n\n  onSignUpConfirmClick() {\n    this.clicked = true;\n    const valid = this.checkValidation();\n    if (valid) {\n      if (this.checkIfTermsAndConditionsAgreed()) this.registerUser();\n    }\n  }\n\n  requestStates() {\n    axios\n      .get(\"/address/get-states\")\n      .then(({ data: states }) => {\n        if (states && states.length > 0) {\n          this.states = states;\n          this.populateStates();\n        }\n      })\n      .catch(function (error) {});\n  }\n\n  requestDistricts(stateCode) {\n    axios\n      .get(`/address/get-districts?code=${stateCode}`)\n      .then(({ data: districts }) => {\n        if (districts && districts.length > 0) {\n          this.populateDistricts(districts);\n        }\n      })\n      .catch(function (error) {});\n  }\n\n  populateStates() {\n    const { states } = this;\n    $(\"#state\").html(\"\");\n    let options = \"<option selected value>SELECT STATE</option>\";\n\n    for (let i = 0; i < states.length; i++) {\n      options += `<option data-code=${states[i].code} value=${states[i].name}>${states[i].name}</option>`;\n    }\n    $(\"#state\").append(options);\n  }\n\n  populateDistricts(districts) {\n    $(\"#district\").html(\"\");\n    let options = \"<option selected value>SELECT DISTRICT</option>\";\n    for (let i = 0; i < districts.length; i++) {\n      options += `<option data-code=${districts[i].code} value=${districts[i].name}>${districts[i].name}</option>`;\n    }\n    $(\".district-wrapper\").show();\n    $(\"#district\").append(options);\n  }\n\n  registerUser() {\n    const { model } = this;\n    const data = {\n      phone_number: model[0].value,\n      blood_group: model[1].value,\n      state: model[2].value,\n      district: model[3].value,\n      password: model[4].value,\n      user_role: $(\"input#gridRadios1:checked\").val() ? 0 : 1,\n    };\n\n    axios\n      .post(\"/user/save\", data)\n      .then(({ data: response }) => {\n        if (response && response.success) {\n          this.resetForm();\n          $(\"#signupModal\").modal(\"hide\");\n          $.toaster({ settings: { timeout: 15000 } });\n\n          $.toaster({\n            priority: \"success\",\n            title: \"Success\",\n            message: `You are successfully registered, we have sent a confirmation link on your phone. \n          Please click on that link to verify your phone.`,\n          });\n        } else if (\n          response &&\n          response.error &&\n          response.error === \"exist already\"\n        ) {\n          const errorElement = $(\"#phoneNumber\").next();\n          errorElement.text(\"User already exists with this phone number\");\n          errorElement.show();\n        }\n      })\n      .catch(function (error) {\n        console.log(error);\n        $.toaster({ settings: { timeout: 5000 } });\n        $.toaster({\n          priority: \"danger\",\n          title: \"Error\",\n          message: `Something is wrong. Please try later`,\n        });\n      });\n  }\n}\n\n$(document).ready(function () {\n  axios.defaults.headers.post[\"X-CSRF-Token\"] = $(\n    'meta[name=\"csrf-token\"]'\n  ).attr(\"content\");\n  axios.defaults.headers.common[\"X-Requested-With\"] = \"XMLHttpRequest\";\n\n  new SignUp();\n});\n"],"file":"signup.js"}